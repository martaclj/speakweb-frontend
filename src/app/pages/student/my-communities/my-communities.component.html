<div class="container mt-4 mb-5">

    <div class="d-flex align-items-center justify-content-between mb-5 p-4 bg-white rounded-4 shadow-sm border-start border-5 border-brand">
        <div>
            <h1 class="fw-bold text-navy mb-1">Â¡Hola de nuevo! ðŸ‘‹</h1>
            <p class="text-muted mb-0">AquÃ­ tienes tus grupos activos. Â¡A practicar!</p>
        </div>
        <button class="btn btn-outline-brand rounded-pill px-4" routerLink="/home">
            <i class="bi bi-plus-lg me-2"></i> Unirme a otro grupo
        </button>
    </div>

    @if (isLoading) {
        <div class="text-center py-5">
            <div class="spinner-border text-brand" role="status"></div>
            <p class="mt-2 text-muted">Cargando tu escritorio...</p>
        </div>
    }

    @if (!isLoading && myMemberships.length === 0) {
        <div class="text-center py-5 bg-light rounded-4 border border-dashed">
            <i class="bi bi-emoji-frown display-1 text-muted opacity-50"></i>
            <h3 class="mt-3 text-navy">Tu escritorio estÃ¡ vacÃ­o</h3>
            <p class="text-muted">AÃºn no te has unido a ninguna comunidad de idiomas.</p>
            <a routerLink="/home" class="btn btn-brand text-white mt-2 px-4 py-2">
                Explorar Comunidades
            </a>
        </div>
    }

    <div class="row">
        @for (member of myMemberships; track member.id) {
            <div class="col-md-6 mb-4"> <div class="card border-0 shadow-sm h-100 rounded-4 overflow-hidden hover-card">
                    <div class="row g-0 h-100">
                        
                        <div class="col-4 position-relative">
                            @if (member.group.imageUrl) {
                                <img [src]="member.group.imageUrl" class="img-fluid h-100 object-fit-cover" [alt]="member.group.name">
                            } @else {
                                <div class="bg-brand h-100 d-flex align-items-center justify-content-center text-white">
                                    <i class="bi bi-chat-dots-fill display-4 opacity-50"></i>
                                </div>
                            }
                            <div class="position-absolute top-0 start-0 w-100 h-100 bg-dark opacity-10"></div>
                        </div>

                        <div class="col-8">
                            <div class="card-body h-100 d-flex flex-column justify-content-between py-3">
                                
                                <div>
                                    <div class="d-flex justify-content-between align-items-start mb-2">
                                        @if (member.isExpert) {
                                            <span class="badge bg-warning text-dark border border-warning">ðŸ‘‘ Experto</span>
                                        } @else {
                                            <span class="badge bg-light text-muted border">ðŸ“š Estudiante</span>
                                        }
                                        <small class="text-muted" style="font-size: 0.7rem;">ID: #{{member.id}}</small>
                                    </div>

                                    <h5 class="card-title fw-bold text-navy mb-1 text-truncate">
                                        {{ member.group.name }}
                                    </h5>
                                    
                                    <p class="small text-muted mb-2">
                                        {{ member.group.language1.name }} â†” {{ member.group.language2.name }}
                                    </p>
                                </div>

                                <div class="mt-2">
                                    <a [routerLink]="['/group', member.group.id]" class="btn btn-brand text-white w-100 btn-sm py-2 shadow-sm">
                                        ðŸ“… Ir al Panel del Grupo
                                    </a>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>

            </div>
        }
    </div>
</div>