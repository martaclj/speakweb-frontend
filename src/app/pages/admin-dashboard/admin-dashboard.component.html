<div class="container mt-5 mb-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h2 class="fw-bold text-navy">Panel de Admin</h2>
            <p class="text-muted">Gestión de usuarios</p>
        </div>
        <button class="btn btn-outline-secondary btn-sm" (click)="loadUsers()">Actualizar</button>
    </div>

    @if (!isLoading) {
        <div class="card border-0 shadow-sm rounded-4 overflow-hidden">
            <div class="table-responsive">
                <table class="table table-hover align-middle mb-0">
                    <thead class="bg-light">
                        <tr>
                            <th class="ps-4">Usuario</th>
                            <th>Email</th>
                            <th>Rol</th>
                            <th class="text-end pe-4">Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        @for (user of users; track user.id) {
                            <tr>
                                <td class="ps-4">
                                    <a [routerLink]="['/profile', user.id]" class="d-flex align-items-center text-decoration-none text-reset" title="Ver perfil público">
                                        <img [src]="user.avatarUrl || 'https://ui-avatars.com/api/?name=' + user.name" class="rounded-circle me-3 object-fit-cover shadow-sm" width="40" height="40">
                                    <div>
                                        <div class="fw-bold text-navy icon-link-hover">{{ user.name }} {{ user.surname }}</div>
                                        <div class="small text-muted">ID: {{ user.id }}</div>
                                    </div>
                                    </a>
                                </td>
                                <td>{{ user.email }}</td>
                                <td>
                                    @if (user.email.includes('admin')) {
                                        <span class="badge bg-warning text-dark">ADMIN</span>
                                    } @else {
                                        <span class="badge bg-light text-dark border">USER</span>
                                    }
                                </td>
                                <td class="text-end pe-4">
                                    <button class="btn btn-sm btn-outline-danger rounded-pill" (click)="deleteUser(user)">
                                        Dar de baja
                                    </button>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
        <!-- // contador de usuarios -->
         <div class="mt-3 text-end text-muted small">
            Total usuarios: {{ users.length }}
         </div>
    }

</div>